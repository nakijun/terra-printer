#include<TdkLayoutTypes.h>
#include <TdkWidthProperty.h>
#include <math.h>

///////////////////////////////////////////////////////////////////////////////
//Constructor
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

TdkWidthProperty::TdkWidthProperty(const double &newVal)
{
	_propertyName="Width_Property";
	_x1=NULL;
	_x2=NULL;
	_redraw=NULL;
}

///////////////////////////////////////////////////////////////////////////////
//Destructor
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

TdkWidthProperty::~TdkWidthProperty()
{
	_x1=NULL;
	_x2=NULL;
	_redraw=NULL;
}

///////////////////////////////////////////////////////////////////////////////
//Sets width property value
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

void TdkWidthProperty::setValue(const double &newVal)
{
	*_x2=*_x1 + newVal;
	*_redraw=true;
}

///////////////////////////////////////////////////////////////////////////////
//Returns the width property value
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

double TdkWidthProperty::getValue()
{
	return fabs(*_x2 - *_x1);
}

///////////////////////////////////////////////////////////////////////////////
//Return the width value
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

void TdkWidthProperty::getValue(double &value)
{
	value=(_x1!=0 && _x2!=0 ? fabs(*_x2 - *_x1) : 0);
}

///////////////////////////////////////////////////////////////////////////////
//Equal Operator
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

TdkWidthProperty& TdkWidthProperty::operator=(const TdkWidthProperty &other)
{
	*_x1=*other._x1;
	*_x2=*other._x2;
	*_redraw=true;
	return *this;
}

///////////////////////////////////////////////////////////////////////////////
//Equal Operator
//Author : Rui Mauricio Gregório 
//Date : 07/2009
///////////////////////////////////////////////////////////////////////////////

TdkWidthProperty& TdkWidthProperty::operator=(const TdkAbstractProperty &other)
{
	*_x1=*((TdkWidthProperty&)other)._x1;
	*_x2=*((TdkWidthProperty&)other)._x2;
	*_redraw=true;
	return *this;
}